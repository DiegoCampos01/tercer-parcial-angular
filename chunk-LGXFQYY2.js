import{a as ee}from"./chunk-V2D7VAZ5.js";import{b as k,c as z}from"./chunk-2V7ITQDO.js";import{a as J,b as K,c as Q,f as W,g as X}from"./chunk-3YUSJBQI.js";import{a as Z,b as $}from"./chunk-BSRP6IBA.js";import{c as Y}from"./chunk-VFJUGW5G.js";import"./chunk-BWIHQ5OF.js";import{b as q,d as l,f as N,g as R,j as T,l as w,m as V,p as j,q as A,s as O,t as G,u as B,y as D,z as P}from"./chunk-KXMWBQJZ.js";import"./chunk-62XFUPSB.js";import"./chunk-3UGYG4GW.js";import"./chunk-VH5QYMKE.js";import{Ba as u,Cb as F,Fb as I,Hc as L,Ic as H,Ja as t,K as h,Ka as e,La as c,Lb as y,Nb as U,Ra as C,Rb as x,ab as i,cb as v,ja as m,na as d,sa as E,ta as S,xa as p}from"./chunk-T7TK6TUY.js";function ie(r,o){r&1&&(t(0,"mat-error"),i(1," El nombre es requerido "),e())}function oe(r,o){r&1&&(t(0,"mat-error"),i(1," El email es requerido "),e())}function ae(r,o){r&1&&(t(0,"mat-error"),i(1," Email inv\xE1lido "),e())}function ne(r,o){r&1&&(t(0,"mat-error"),i(1," La contrase\xF1a es requerida "),e())}function me(r,o){r&1&&(t(0,"mat-error"),i(1," El rol es requerido "),e())}var f=class r{constructor(o,n,a,s){this.fb=o;this.usuariosService=n;this.router=a;this.route=s;this.usuarioForm=this.fb.group({nombre:["",l.required],email:["",[l.required,l.email]],password:["",l.required],rol:["usuario",l.required],activo:[!0]})}usuarioForm;editando=!1;usuarioId=null;ngOnInit(){let o=this.route.snapshot.paramMap.get("id");o&&(this.editando=!0,this.usuarioId=+o,this.usuariosService.getUsuario(this.usuarioId).subscribe(n=>{this.usuarioForm.patchValue({nombre:n.nombre,email:n.email,rol:n.rol}),this.usuarioForm.get("password")?.clearValidators(),this.usuarioForm.get("password")?.updateValueAndValidity()}))}onSubmit(){if(this.usuarioForm.valid){let o=this.usuarioForm.value;this.editando&&this.usuarioId?this.usuariosService.actualizarUsuario(this.usuarioId,o).subscribe(()=>{this.router.navigate(["/usuarios"])}):this.usuariosService.crearUsuario(o).subscribe(()=>{this.router.navigate(["/usuarios"])})}}cancelar(){this.router.navigate(["/usuarios"])}static \u0275fac=function(n){return new(n||r)(d(A),d(ee),d(U),d(y))};static \u0275cmp=E({type:r,selectors:[["app-crear-usuario"]],decls:36,vars:9,consts:[[3,"ngSubmit","formGroup"],["appearance","fill"],["matInput","","formControlName","nombre","required",""],[4,"ngIf"],["matInput","","formControlName","email","required","","type","email"],["matInput","","formControlName","password","required","","type","password"],["formControlName","rol","required",""],["value","admin"],["value","usuario"],[1,"form-actions"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["mat-button","","type","button",3,"click"]],template:function(n,a){if(n&1&&(t(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),i(3),e()(),t(4,"mat-card-content")(5,"form",0),C("ngSubmit",function(){return a.onSubmit()}),t(6,"mat-form-field",1)(7,"mat-label"),i(8,"Nombre"),e(),c(9,"input",2),p(10,ie,2,0,"mat-error",3),e(),t(11,"mat-form-field",1)(12,"mat-label"),i(13,"Email"),e(),c(14,"input",4),p(15,oe,2,0,"mat-error",3)(16,ae,2,0,"mat-error",3),e(),t(17,"mat-form-field",1)(18,"mat-label"),i(19,"Contrase\xF1a"),e(),c(20,"input",5),p(21,ne,2,0,"mat-error",3),e(),t(22,"mat-form-field",1)(23,"mat-label"),i(24,"Rol"),e(),t(25,"mat-select",6)(26,"mat-option",7),i(27,"Administrador"),e(),t(28,"mat-option",8),i(29,"Usuario"),e()(),p(30,me,2,0,"mat-error",3),e(),t(31,"div",9)(32,"button",10),i(33),e(),t(34,"button",11),C("click",function(){return a.cancelar()}),i(35," Cancelar "),e()()()()()),n&2){let s,_,g,b,M;m(3),v("",a.editando?"Editar":"Crear"," Usuario"),m(2),u("formGroup",a.usuarioForm),m(5),u("ngIf",(s=a.usuarioForm.get("nombre"))==null?null:s.hasError("required")),m(5),u("ngIf",(_=a.usuarioForm.get("email"))==null?null:_.hasError("required")),m(),u("ngIf",(g=a.usuarioForm.get("email"))==null?null:g.hasError("email")),m(5),u("ngIf",(b=a.usuarioForm.get("password"))==null?null:b.hasError("required")),m(9),u("ngIf",(M=a.usuarioForm.get("rol"))==null?null:M.hasError("required")),m(2),u("disabled",!a.usuarioForm.valid),m(),v(" ",a.editando?"Actualizar":"Crear"," ")}},dependencies:[I,F,O,T,q,N,R,j,w,V,P,D,G,B,z,k,$,Z,Y,H,L,X,J,Q,W,K],styles:["form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;padding:1rem}.form-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:flex-end}mat-card[_ngcontent-%COMP%]{margin:20px}"]})};var ue=[{path:"",component:f}],te=class r{static \u0275fac=function(n){return new(n||r)};static \u0275mod=S({type:r});static \u0275inj=h({imports:[x.forChild(ue)]})};export{te as CrearUsuarioModule};
