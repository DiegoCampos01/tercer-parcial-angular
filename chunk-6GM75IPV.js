import{b as P,c as L}from"./chunk-2V7ITQDO.js";import{a as $,b as H,c as Y,d as z,f as J,g as K}from"./chunk-3YUSJBQI.js";import{b as F,d as s,f as N,g as E,j as x,k as y,l as A,m as T,n as j,o as B,q as G,s as R,t as V,u as D,y as O,z as w}from"./chunk-KXMWBQJZ.js";import{a as W}from"./chunk-HXPMKNJR.js";import{a as Q}from"./chunk-LIQZNQAM.js";import{a as U}from"./chunk-TKCKWD2P.js";import{Ba as c,Cb as g,Fb as _,Hc as k,Ic as q,Ja as a,Ka as o,La as h,Lb as S,Nb as M,Ra as v,Sa as C,ab as n,db as I,ja as m,na as l,sa as b,xa as f}from"./chunk-T7TK6TUY.js";function Z(e,r){if(e&1&&(a(0,"mat-card-subtitle"),n(1),o()),e&2){let i=C();m(),I(" ",i.nombreAlumno," - ",i.nombreCurso," ")}}function tt(e,r){e&1&&(a(0,"mat-error"),n(1," La calificaci\xF3n es requerida "),o())}function et(e,r){e&1&&(a(0,"mat-error"),n(1," La calificaci\xF3n m\xEDnima es 0 "),o())}function it(e,r){e&1&&(a(0,"mat-error"),n(1," La calificaci\xF3n m\xE1xima es 5 "),o())}var X=class e{constructor(r,i,t,u,d,p){this.fb=r;this.route=i;this.router=t;this.notasService=u;this.alumnosService=d;this.cursosService=p;this.notaForm=this.fb.group({calificacion:["",[s.required,s.min(0),s.max(5)]]})}notaForm;alumnoId=null;cursoId=null;nombreAlumno="";nombreCurso="";ngOnInit(){if(this.alumnoId=Number(this.route.snapshot.paramMap.get("alumnoId")),this.cursoId=Number(this.route.snapshot.paramMap.get("cursoId")),this.alumnoId&&this.cursoId){let r=this.alumnosService.getAlumnoById(this.alumnoId),i=this.cursosService.getCursoById(this.cursoId);if(r&&i){this.nombreAlumno=`${r.nombre} ${r.apellido}`,this.nombreCurso=i.nombre;let t=this.notasService.getNotaPorAlumnoYCurso(this.alumnoId,this.cursoId);t&&this.notaForm.patchValue({calificacion:t.calificacion})}else this.router.navigate(["/notas"])}else this.router.navigate(["/notas"])}onSubmit(){this.notaForm.valid&&this.alumnoId&&this.cursoId&&(this.notasService.guardarNota({alumnoId:this.alumnoId,cursoId:this.cursoId,calificacion:this.notaForm.value.calificacion}),this.router.navigate(["/notas"]))}cancelar(){this.router.navigate(["/notas"])}static \u0275fac=function(i){return new(i||e)(l(G),l(S),l(M),l(W),l(Q),l(U))};static \u0275cmp=b({type:e,selectors:[["app-editar-nota"]],decls:20,vars:6,consts:[[1,"container"],[4,"ngIf"],[3,"ngSubmit","formGroup"],["appearance","outline",1,"full-width"],["matInput","","type","number","formControlName","calificacion","min","0","max","5","step","0.1"],[1,"button-container"],["mat-button","","type","button",3,"click"],["mat-raised-button","","color","primary","type","submit",3,"disabled"]],template:function(i,t){if(i&1&&(a(0,"div",0)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title"),n(4,"Calificar Alumno"),o(),f(5,Z,2,2,"mat-card-subtitle",1),o(),a(6,"mat-card-content")(7,"form",2),v("ngSubmit",function(){return t.onSubmit()}),a(8,"mat-form-field",3)(9,"mat-label"),n(10,"Calificaci\xF3n"),o(),h(11,"input",4),f(12,tt,2,0,"mat-error",1)(13,et,2,0,"mat-error",1)(14,it,2,0,"mat-error",1),o(),a(15,"div",5)(16,"button",6),v("click",function(){return t.cancelar()}),n(17,"Cancelar"),o(),a(18,"button",7),n(19," Guardar Calificaci\xF3n "),o()()()()()()),i&2){let u,d,p;m(5),c("ngIf",t.nombreAlumno&&t.nombreCurso),m(2),c("formGroup",t.notaForm),m(5),c("ngIf",(u=t.notaForm.get("calificacion"))==null?null:u.hasError("required")),m(),c("ngIf",(d=t.notaForm.get("calificacion"))==null?null:d.hasError("min")),m(),c("ngIf",(p=t.notaForm.get("calificacion"))==null?null:p.hasError("max")),m(4),c("disabled",!t.notaForm.valid)}},dependencies:[_,g,R,x,F,y,N,E,B,j,A,T,w,O,V,D,L,P,q,k,K,$,Y,J,z,H],styles:[".container[_ngcontent-%COMP%]{padding:20px;max-width:600px;margin:0 auto}.full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:20px}.button-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px}"]})};export{X as EditarNotaComponent};
