import{a as m}from"./chunk-LIQZNQAM.js";import{a as b}from"./chunk-TKCKWD2P.js";import{J as p,M as o,a as t,b as a,h as u,k as s}from"./chunk-T7TK6TUY.js";var v=class c{constructor(i,e){this.cursosService=i;this.alumnosService=e;this.cargarInscripciones()}STORAGE_KEY="inscripciones";inscripcionesSubject=new u([]);cargarInscripciones(){let i=localStorage.getItem(this.STORAGE_KEY);if(i){let e=JSON.parse(i);this.inscripcionesSubject.next(e.map(r=>a(t({},r),{fechaInscripcion:new Date(r.fechaInscripcion)})))}}guardarInscripciones(){localStorage.setItem(this.STORAGE_KEY,JSON.stringify(this.inscripcionesSubject.value))}generarNuevoId(){let i=this.inscripcionesSubject.value;return i.length>0?Math.max(...i.map(e=>e.id))+1:1}getInscripciones(){return this.inscripcionesSubject.asObservable()}getInscripcionesPorAlumno(i){let e=this.inscripcionesSubject.value.filter(r=>r.alumnoId===i);return s(e)}getInscripcionesPorCurso(i){let e=this.inscripcionesSubject.value.filter(r=>r.cursoId===i);return s(e)}inscribirAlumno(i,e){let r={id:this.generarNuevoId(),cursoId:i,alumnoId:e,fechaInscripcion:new Date},n=[...this.inscripcionesSubject.value,r];return this.inscripcionesSubject.next(n),this.guardarInscripciones(),this.cursosService.agregarAlumno(i,e),this.alumnosService.inscribirEnCurso(e,i),s(void 0)}desinscribirAlumno(i,e){let r=this.inscripcionesSubject.value.filter(n=>!(n.cursoId===i&&n.alumnoId===e));return this.inscripcionesSubject.next(r),this.guardarInscripciones(),this.cursosService.removerAlumno(i,e),this.alumnosService.desinscribirDeCurso(e,i),s(void 0)}estaInscrito(i,e){let r=this.inscripcionesSubject.value.some(n=>n.cursoId===i&&n.alumnoId===e);return s(r)}static \u0275fac=function(e){return new(e||c)(o(b),o(m))};static \u0275prov=p({token:c,factory:c.\u0275fac,providedIn:"root"})};export{v as a};
