import{J as i,a as n,b as u,h as r}from"./chunk-T7TK6TUY.js";var m=class o{STORAGE_KEY="alumnos";alumnosSubject=new r([]);constructor(){this.cargarAlumnos()}cargarAlumnos(){let t=localStorage.getItem(this.STORAGE_KEY);if(t){let e=JSON.parse(t);this.alumnosSubject.next(e.map(s=>u(n({},s),{fechaNacimiento:new Date(s.fechaNacimiento)})))}else{let e=[{id:1,nombre:"Juan",apellido:"P\xE9rez",email:"juan@example.com",fechaNacimiento:new Date("1995-05-15"),cursos:[]},{id:2,nombre:"Mar\xEDa",apellido:"Gonz\xE1lez",email:"maria@example.com",fechaNacimiento:new Date("1998-08-20"),cursos:[]}];this.alumnosSubject.next(e),this.guardarAlumnos()}}guardarAlumnos(){localStorage.setItem(this.STORAGE_KEY,JSON.stringify(this.alumnosSubject.value))}generarNuevoId(){let t=this.alumnosSubject.value;return t.length>0?Math.max(...t.map(e=>e.id))+1:1}getAlumnos(){return this.alumnosSubject.asObservable()}getAlumnoById(t){return this.alumnosSubject.value.find(e=>e.id===t)}agregarAlumno(t){let e=u(n({},t),{id:this.generarNuevoId(),cursos:[]}),s=[...this.alumnosSubject.value,e];this.alumnosSubject.next(s),this.guardarAlumnos()}actualizarAlumno(t){let e=this.alumnosSubject.value.map(s=>s.id===t.id?t:s);this.alumnosSubject.next(e),this.guardarAlumnos()}eliminarAlumno(t){let e=this.alumnosSubject.value.filter(s=>s.id!==t);this.alumnosSubject.next(e),this.guardarAlumnos()}inscribirEnCurso(t,e){let s=this.alumnosSubject.value.map(a=>a.id===t&&!a.cursos.includes(e)?u(n({},a),{cursos:[...a.cursos,e]}):a);this.alumnosSubject.next(s),this.guardarAlumnos()}desinscribirDeCurso(t,e){let s=this.alumnosSubject.value.map(a=>a.id===t?u(n({},a),{cursos:a.cursos.filter(l=>l!==e)}):a);this.alumnosSubject.next(s),this.guardarAlumnos()}static \u0275fac=function(e){return new(e||o)};static \u0275prov=i({token:o,factory:o.\u0275fac,providedIn:"root"})};export{m as a};
