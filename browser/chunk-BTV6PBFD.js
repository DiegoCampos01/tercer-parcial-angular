import{a as Y}from"./chunk-2YESWLJY.js";import{a as j,b as z,c as N,d as B,e as F,f as J,g as q,h as G,i as K,j as Q,k as U}from"./chunk-LHPFZ6HT.js";import{a as V,b as $}from"./chunk-AH55HQJT.js";import{a as W}from"./chunk-LIQZNQAM.js";import{a as X}from"./chunk-TKCKWD2P.js";import"./chunk-3UGYG4GW.js";import"./chunk-VH5QYMKE.js";import{Ba as m,Cb as y,D as P,Fb as L,Hc as A,Ic as H,Ja as i,Ka as o,La as I,Lb as T,Ma as p,Na as u,Nb as k,Pa as M,Ra as b,Rb as R,S as x,Sa as d,T as h,a as g,ab as r,b as v,bb as f,db as E,ja as s,k as S,n as D,na as l,p as O,sa as w,xa as c}from"./chunk-T7TK6TUY.js";function tt(e,t){if(e&1&&(i(0,"div",14)(1,"p"),r(2),o()()),e&2){let n=d();s(2),E("Alumno: ",n.alumno.nombre," ",n.alumno.apellido,"")}}function et(e,t){e&1&&(i(0,"th",15),r(1,"Nombre del Curso"),o())}function nt(e,t){if(e&1&&(i(0,"td",16),r(1),o()),e&2){let n=t.$implicit;s(),f(n.nombre)}}function it(e,t){e&1&&(i(0,"th",15),r(1,"Profesor"),o())}function ot(e,t){if(e&1&&(i(0,"td",16),r(1),o()),e&2){let n=t.$implicit;s(),f(n.profesor)}}function rt(e,t){e&1&&(i(0,"th",15),r(1,"Duraci\xF3n (horas)"),o())}function st(e,t){if(e&1&&(i(0,"td",16),r(1),o()),e&2){let n=t.$implicit;s(),f(n.duracion)}}function at(e,t){e&1&&(i(0,"th",15),r(1,"Cupos Disponibles"),o())}function ct(e,t){if(e&1&&(i(0,"td",16),r(1),o()),e&2){let n=t.$implicit;s(),f(n.cuposDisponibles)}}function mt(e,t){e&1&&(i(0,"th",15),r(1,"Acciones"),o())}function lt(e,t){if(e&1){let n=M();i(0,"button",20),b("click",function(){x(n);let _=d().$implicit,C=d();return h(C.inscribirse(_))}),i(1,"mat-icon"),r(2,"how_to_reg"),o(),r(3," Inscribirse "),o()}}function pt(e,t){if(e&1){let n=M();i(0,"button",21),b("click",function(){x(n);let _=d().$implicit,C=d();return h(C.desinscribirse(_))}),i(1,"mat-icon"),r(2,"person_remove"),o(),r(3," Desinscribirse "),o()}}function ut(e,t){e&1&&(i(0,"span",22),r(1," Sin cupos disponibles "),o())}function dt(e,t){if(e&1&&(i(0,"td",16),c(1,lt,4,0,"button",17)(2,pt,4,0,"button",18)(3,ut,2,0,"span",19),o()),e&2){let n=t.$implicit;s(),m("ngIf",!n.inscrito&&n.cuposDisponibles>0),s(),m("ngIf",n.inscrito),s(),m("ngIf",!n.inscrito&&n.cuposDisponibles===0)}}function ft(e,t){e&1&&I(0,"tr",23)}function _t(e,t){e&1&&I(0,"tr",24)}var Z=class e{constructor(t,n,a,_,C){this.router=t;this.route=n;this.cursosService=a;this.inscripcionesService=_;this.alumnosService=C}displayedColumns=["nombre","profesor","duracion","cuposDisponibles","acciones"];cursosDisponibles=[];alumnoId=null;alumno=null;subscriptions=[];ngOnInit(){this.subscriptions.push(this.route.params.subscribe(t=>{this.alumnoId=t.id?+t.id:null,this.alumnoId?this.cargarDatosAlumno():this.cargarCursosDisponibles()}))}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}cargarDatosAlumno(){if(this.alumnoId){let t=this.alumnosService.getAlumnoById(this.alumnoId);t?(this.alumno=t,this.cargarCursosDisponibles()):this.router.navigate(["/alumnos"])}}cargarCursosDisponibles(){this.subscriptions.push(this.cursosService.getCursos().pipe(P(t=>this.alumnoId?O(t.map(n=>this.inscripcionesService.estaInscrito(n.id,this.alumnoId).pipe(D(a=>v(g({},n),{inscrito:a,cuposDisponibles:n.cupo-(n.alumnos?.length||0)}))))):S(t.map(n=>v(g({},n),{inscrito:!1,cuposDisponibles:n.cupo-(n.alumnos?.length||0)}))))).subscribe(t=>{this.cursosDisponibles=t}))}inscribirse(t){this.alumnoId&&t.cuposDisponibles>0&&!t.inscrito&&this.inscripcionesService.inscribirAlumno(t.id,this.alumnoId).subscribe(()=>{this.cargarCursosDisponibles()})}desinscribirse(t){this.alumnoId&&t.inscrito&&this.inscripcionesService.desinscribirAlumno(t.id,this.alumnoId).subscribe(()=>{this.cargarCursosDisponibles()})}volver(){this.router.navigate(["/alumnos"])}static \u0275fac=function(n){return new(n||e)(l(k),l(T),l(X),l(Y),l(W))};static \u0275cmp=w({type:e,selectors:[["app-lista-inscripciones"]],decls:27,vars:5,consts:[[1,"container"],["class","alumno-info",4,"ngIf"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","nombre"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","profesor"],["matColumnDef","duracion"],["matColumnDef","cuposDisponibles"],["matColumnDef","acciones"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"actions"],["mat-button","","color","primary",3,"click"],[1,"alumno-info"],["mat-header-cell",""],["mat-cell",""],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","color","warn",3,"click",4,"ngIf"],["class","no-cupos",4,"ngIf"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","warn",3,"click"],[1,"no-cupos"],["mat-header-row",""],["mat-row",""]],template:function(n,a){n&1&&(i(0,"div",0)(1,"h2"),r(2),o(),c(3,tt,3,2,"div",1),i(4,"table",2),p(5,3),c(6,et,2,0,"th",4)(7,nt,2,1,"td",5),u(),p(8,6),c(9,it,2,0,"th",4)(10,ot,2,1,"td",5),u(),p(11,7),c(12,rt,2,0,"th",4)(13,st,2,1,"td",5),u(),p(14,8),c(15,at,2,0,"th",4)(16,ct,2,1,"td",5),u(),p(17,9),c(18,mt,2,0,"th",4)(19,dt,4,3,"td",5),u(),c(20,ft,1,0,"tr",10)(21,_t,1,0,"tr",11),o(),i(22,"div",12)(23,"button",13),b("click",function(){return a.volver()}),i(24,"mat-icon"),r(25,"arrow_back"),o(),r(26," Volver a la lista de alumnos "),o()()()),n&2&&(s(2),f(a.alumno?"Inscripciones a Cursos":"Lista de Inscripciones"),s(),m("ngIf",a.alumno),s(),m("dataSource",a.cursosDisponibles),s(16),m("matHeaderRowDef",a.displayedColumns),s(),m("matRowDefColumns",a.displayedColumns))},dependencies:[L,y,R,U,j,N,q,B,z,G,F,J,K,Q,H,A,$,V],styles:[".container[_ngcontent-%COMP%]{padding:20px;max-width:1200px;margin:0 auto}.container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:20px;color:#333;font-size:24px}.container[_ngcontent-%COMP%]   .alumno-info[_ngcontent-%COMP%]{margin-bottom:20px;padding:10px;background-color:#f5f5f5;border-radius:4px}.container[_ngcontent-%COMP%]   .alumno-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:16px;color:#666}.container[_ngcontent-%COMP%]   .mat-elevation-z8[_ngcontent-%COMP%]{width:100%;margin-bottom:20px;border-radius:4px;overflow:hidden}.container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%]   .mat-mdc-row[_ngcontent-%COMP%]:hover{background-color:#f5f5f5}.container[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{background-color:#f8f9fa;color:#333;font-weight:600;padding:12px 16px}.container[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{padding:12px 16px}.container[_ngcontent-%COMP%]   .mat-column-acciones[_ngcontent-%COMP%]{width:150px;text-align:center}.container[_ngcontent-%COMP%]   button[mat-raised-button][_ngcontent-%COMP%]{min-width:130px}.container[_ngcontent-%COMP%]   button[mat-raised-button][_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{margin-right:8px}.container[_ngcontent-%COMP%]   .actions-container[_ngcontent-%COMP%]{margin-top:20px;display:flex;justify-content:flex-start}.container[_ngcontent-%COMP%]   .actions-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:14px}.container[_ngcontent-%COMP%]   .actions-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{margin-right:8px;font-size:20px;vertical-align:middle}.container[_ngcontent-%COMP%]   .no-cupos[_ngcontent-%COMP%]{color:#f44336;font-style:italic}.container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{margin-top:20px}"]})};export{Z as ListaInscripcionesComponent};
